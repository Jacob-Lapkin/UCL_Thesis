{% extends 'layout.html' %}

{% block body %}
<nav class="navbar navbar-expand-sm navbar-dark bg-transparent">
    <a class="navbar-brand" href="#" style="margin-left: 2%;">Tennis Sense</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('home') }}">Home</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="{{url_for('stroke')}}">Analysis</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{url_for('history')}}">History</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{url_for('gallery')}}">Gallery</a>
          </li>
      </ul>
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
            <div class="container">
            <a class="btn btn-secondary btn-sm text-uppercase" href="{{url_for('logout')}}"><i class="fas fa-sign-out-alt fa-lg"></i>Logout</a>
            </div>
        </li>
    </ul>
    
    </div>
  </nav>
  <!-- end of navbar -->

<div class="container home shadow rounded p-3 mt-4 text-center footer-color" data-aos="fade-up">
    <div class="container-fluid">
        <div class="container-fluid text-center">
            <legend class='border-bottom h1'>Statistics</legend>
        </div>
    </div>

    <!-- angle statistics-->
    <div class='row'>
        <div class="container-fluid text-center p-2">
            <button type="submit" class="btn btn-secondary btn-sm rounded" id="angle_skteches" data-toggle="modal" data-target="#exampleModal2" >Angle Diagrams</button>
        </div>
        <div class="col-md-6">
            <div class='row border m-3 rounded'>
                <div class='col-md-4 text-center p-2'>
                    <button type="submit" class="btn btn-outline-primary btn-sm" id="Legs" onclick="content_legs();">Legs</button>
                </div>
                <div class='col-md-4 text-center p-2'>
                    <button class="btn btn-outline-primary btn-sm" id="Arms" onclick="content_arms();">Arms</button>
                </div>
                <div class='col-md-4 text-center p-2'>
                    <button class="btn btn-outline-primary btn-sm" id="Body" onclick="content_body();">Body</button>
                </div>
            </div>
            <legend class='border-bottom h6'>{{name}}'s right and left arm throughout the stroke</legend>
            <div class="container" id="content_legs">
                <canvas id="myChart" max-width="300" max-height="300"></canvas>
            </div>
            <div class="container" id="content_arms" style="display:none">
                <canvas id="myChart2" max-width="300" max-height="300"></canvas>
            </div>
            <div class="container" id="content_body" style="display:none">
                <canvas id="myChart3" max-width="300" max-height="300"></canvas>
            </div>
        </div>
        <div class="col-md-6">
            <div class='row border m-3 rounded'>
                <div class='col-md-4 text-center p-2'>
                    <button type="submit" class="btn btn-outline-primary btn-sm" id="Legs_user" onclick="content_legs_user();">Legs</button>
                </div>
                <div class='col-md-4 text-center p-2'>
                    <button class="btn btn-outline-primary btn-sm" id="Arms_user" onclick="content_arms_user();">Arms</button>
                </div>
                <div class='col-md-4 text-center p-2'>
                    <button class="btn btn-outline-primary btn-sm" id="Body_user" onclick="content_body_user();">Body</button>
                </div>
            </div>
            <legend class='border-bottom h6'>Your right and left angles throughout the stroke</legend>
            <div class="container" id="content_legs_user">
                <canvas id="myChart4" max-width="300" max-height="300"></canvas>
            </div>
            <div class="container" id="content_arms_user" style="display:none">
                <canvas id="myChart5" max-width="300" max-height="300"></canvas>
            </div>
            <div class="container" id="content_body_user" style="display:none">
                <canvas id="myChart6" max-width="300" max-height="300"></canvas>
            </div>
        </div>
    </div>

    <!--phase statistics-->
    <div class='row mt-4'>
        <div class="container-fluid text-center p-2">
            <!-- Button trigger modal for phases-->
            <button type="submit" class="btn btn-secondary btn-sm rounded" id="phase_skteches" data-toggle="modal" data-target="#exampleModal">Phase Diagrams</button>
        </div>
        <div class="col-md-6">
            <legend class='border-bottom h6'>{{name}} shot breakdown (%)</legend>
            <canvas id="myChart7" max-width="300" max-height="300"></canvas>
        </div>
        <div class="col-md-6">
            <legend class='border-bottom h6'>Your shot breakdown (%)</legend>
            <canvas id="myChart8" max-width="300" max-height="300"></canvas>
        </div>
    </div>
</div>

<!-- results and score -->
<div class="container home shadow rounded p-3 mt-4 mb-4 footer-color"data-aos="fade-up">
    <div class="container-fluid">
        <div class="container-fluid text-center">
            <legend class='border-bottom h1'>Results and Recommendations</legend>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12 pr-5 pl-5">
            <div class="container-fluid text-center p-2">
                <button type="submit" class="btn btn-secondary btn-sm rounded" id="scoring_criteria" data-toggle="modal" data-target="#exampleModal3" >Scoring Criteria</button>
            </div>
            <div class='container-fluid text-center mt-3 border rounded'>
                <h1>{{score}}/100</h1>
                <p>Score</p>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class='container mt-3'> 
                <div>
                    <h5>Legs:</h5>
                    <ul>
                        {% for tip in leg_tips %}
                        {% if '!' in tip  %}
                        <li class=mt-2 style="color: green;"><i class="fas fa-check-circle"></i> {{tip}}</li>
                        {% elif '!' not in tip  %}
                        <li class=mt-2 style="color: red;"><i class="fas fa-times-circle"></i> {{tip}}</li>
                        {% endif %}
                        {% endfor %}
                    </ul>
                </div>
                <div>
                    <h5>Arms:</h5>
                    <ul>
                        {% for tip in arm_tips %}
                        {% if '!' in tip  %}
                        <li class=mt-2 style="color: green;"><i class="fas fa-check-circle"></i> {{tip}}</li>
                        {% elif '!' not in tip  %}
                        <li class=mt-2 style="color: red;"><i class="fas fa-times-circle"></i> {{tip}}</li>
                        {% endif %}
                        {% endfor %}
                    </ul>
                </div>
                <div>
                    <h5>Body:</h5>
                    <ul>
                        {% for tip in body_tips %}
                        {% if '!' in tip  %}
                        <li class=mt-2 style="color: green;"><i class="fas fa-check-circle"></i> {{tip}}</li>
                        {% elif '!' not in tip  %}
                        <li class=mt-2 style="color: red;"><i class="fas fa-times-circle"></i> {{tip}}</li>
                        {% endif %}
                        {% endfor %}
                    </ul>
                </div>
                </div> 
        </div>
   
</div>

<div class="row">
    <div class='container text-center'>
        <p><i class="fas fa-check-circle" style="color: green;"></i> = Looks good</p>
        <p><i class="fas fa-times-circle" style="color: red;"></i> = Needs improvement</p>
    </div>
</div>

</div>

<!-- footer -->
<div class="container-fluid p-4 footer-color">
    <footer class="container text-center mb-2">
      <div class="row align-items-center">
        <div class="col-md-6">
          <p>&copy; 2020-2021 Tennis Sense - UCL - Avanade &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
        </div>
        <div class="col-md-3">
          <a href="#!"><img class="img-fluid img-brand d-block mx-auto" src="/static/assets/img/logos/avanade.svg" alt="..." 
            style="height:50px; width:45%"/></a>
      </div>
      <div class="col-md-3">
          <a href="#!"><img class="img-fluid img-brand d-block mx-auto" src="/static/assets/img/logos/UCL.svg" alt="..."  
            style="height:50px; width:55%"/></a>
      </div>
    </div>
    </footer>
  </div>

<!-- Modal for angle -->
<div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Angle Breakdown</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
        <div class=container>
            <p><span style="color: red;">Red</span><span> = Arms (angle from the wrist to the elbow to the shoulder)</span></p>
            <p><span style="color: blue;">Blue</span><span> = Legs (angle from the hip to the knee to the ankle)</span></p>
            <p><span style="color: green;">Green</span><span> = Body (angle from the elbow to the shoulder to the hip)</span></p>
        </div>
        <div class='container mt-4 border'>
            <img src="../static/assets/img/angles/angles.jpg" class="img-fluid" alt="Responsive image" id='start_phase'>
        </div>
        </div>
      </div>
    </div>
  </div>

<!-- Modal for phases -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Phase Breakdown</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
        <div class='container mt-4 border' data-aos="fade-right">
            <label class='mt-2'>1. Starting Position</label>
            <img src="../static/assets/img/phases/start.jpg" class="img-fluid" alt="Responsive image" id='start_phase'>
            <p>the starting position phase is defined in this analytics tool as the time between when the player initially 
                finishes bouncing the ball and when the player starts the upwards motion of the toss</p>
        </div>
        <div class='container mt-4 border' data-aos="fade-left">
            <label class='mt-2'>2. Takeback and Load</label>
            <img src="../static/assets/img/phases/load.jpg" class="img-fluid" alt="Responsive image">
            <p>the takeback and load phase is defined in this analytics tool as the time between when the player has started taking the 
                racquet back and when the player is at the bottom of their loading position.  </p>
        </div>
        <div class='container mt-4 border' data-aos="fade-right">
            <label class='mt-2'>3. Extending</label>
            <img src="../static/assets/img/phases/extend.jpg" class="img-fluid" alt="Responsive image">
            <p>the extend phase is defined in this analytics tool as the time between when the player has started moving updwards towards the ball 
                and when the player has started to follow through after making contact.  </p>
        </div>
        <div class='container mt-4 border' data-aos="fade-left">
            <label class='mt-2'>4. Finish</label>
            <img src="../static/assets/img/phases/finish.jpg" class="img-fluid" alt="Responsive image">
            <p>the finish phase is defined in this analytics tool as the time between when the player has finished following through  
                and when the player has absorbed the force on the landing leg. </p>
        </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal for scoring -->
<div class="modal fade" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">How you are scored:</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
        

        </div>
      </div>
    </div>
  </div>

  
<script>

// Plotting graphs Professional legs
var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
                
        labels: {{label|tojson}},
        datasets: [{
            label: 'Right Leg',
            data: {{data|tojson}},
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }, {
            label: 'Left Leg',
            data: {{datatwo|tojson}},
            backgroundColor: [
                'rgba(0, 99, 132, 0.2)',
            ],
            borderColor: [
                'rgba(0, 99, 132, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }
        ]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

// Plotting graphs Professional arms
var ctx = document.getElementById('myChart2').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
                
        labels: {{label_arm|tojson}},
        datasets: [{
            label: 'Right arm',
            data: {{data_r_arm|tojson}},
            backgroundColor: [
                'rgba(255, 99, 0, 0.2)',
            ],
            borderColor: [
                'rgba(255, 99, 0, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }, {
            label: 'Left arm',
            data: {{data_l_arm|tojson}},
            backgroundColor: [
                'rgba(0, 200, 0, 0.2)',
            ],
            borderColor: [
                'rgba(0, 200, 0, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }
        ]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>

<script>
// Plotting graphs Professional body
var ctx = document.getElementById('myChart3').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
                
        labels: {{label_body|tojson}},
        datasets: [{
            label: 'Right side of body',
            data: {{dataright_body|tojson}},
            backgroundColor: [
                'rgba(3, 244, 252, .2)',
            ],
            borderColor: [
                'rgba(3, 244, 252, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }, {
            label: 'Left side of body',
            data: {{dataleft_body|tojson}},
            backgroundColor: [
                'rgba(220, 227, 18, .2)',
            ],
            borderColor: [
                'rgba(220, 227, 18, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }
        ]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>

<script>
// Plotting graphs User legs
var ctx = document.getElementById('myChart4').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
                
        labels: {{user_label|tojson}},
        datasets: [{
            label: 'Right Leg',
            data: {{user_right|tojson}},
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }, {
            label: 'Left Leg',
            data: {{user_left|tojson}},
            backgroundColor: [
                'rgba(0, 99, 132, 0.2)',
            ],
            borderColor: [
                'rgba(0, 99, 132, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }
        ]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

// Plotting graphs User arms
var ctx = document.getElementById('myChart5').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
                
        labels: {{user_label|tojson}},
        datasets: [{
            label: 'Right arm',
            data: {{user_right_arm|tojson}},
            backgroundColor: [
                'rgba(255, 99, 0, 0.2)',
            ],
            borderColor: [
                'rgba(255, 99, 0, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }, {
            label: 'Left arm',
            data: {{user_left_arm|tojson}},
            backgroundColor: [
                'rgba(0, 200, 0, 0.2)',
            ],
            borderColor: [
                'rgba(0, 200, 0, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }
        ]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

// Plotting graphs User body
var ctx = document.getElementById('myChart6').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
                
        labels: {{user_label|tojson}},
        datasets: [{
            label: 'Right body',
            data: {{User_data_r_body|tojson}},
            backgroundColor: [
                'rgba(3, 244, 252, .2)',
            ],
            borderColor: [
                'rgba(3, 244, 252, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }, {
            label: 'Left body',
            data: {{User_data_l_body|tojson}},
            backgroundColor: [
                'rgba(220, 227, 18, .2)',
            ],
            borderColor: [
                'rgba(220, 227, 18, 1)',
            ],
            borderWidth: 1, 
            fill: true,
        }
        ]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>

<script>
// PLOTTING GRAPH pro doughnut
    var ctx = document.getElementById('myChart7').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['Start', 'Takeback and Load', 'Extend', 'Finish'],
        datasets: [{
            label: 'Left leg angle during extension',
            data: {{doughnut_data|tojson}},
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        responsive: false,

        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>
<script>
// PLOTTING GRAPH user doughnut
var ctx = document.getElementById('myChart8').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['Start', 'Takeback and Load', 'Extend', 'Finish'],
        datasets: [{
            label: 'Left leg angle during extension',
            data: {{user_doughnut|tojson}},
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        responsive: false,

        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>

<script type="text/javascript">
    window.onbeforeunload = function () {
     return 'Though your score will be saved, leaving this page will delete your results';
    }
   </script>



{% endblock %}


